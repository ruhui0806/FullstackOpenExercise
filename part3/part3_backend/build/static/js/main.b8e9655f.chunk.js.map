{"version":3,"sources":["services/persons.js","components/Person.js","components/Persons.js","components/Filter.js","components/PersonForm.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","personService","getAll","axios","get","then","res","data","create","newObj","post","remove","deleteObj","delete","id","update","Obj","put","Person","person","handleDelete","name","number","onClick","Persons","props","persons","map","personItem","Filter","type","value","input","onChange","handlePersonShow","personsToshow","PersonForm","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","Notification","message","errorOccured","style","color","fontStyle","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","useState","setPersons","setNewName","setInput","showNone","setShowNone","setNewNumber","notification","setNotification","errorOccur","setErrorOccur","useEffect","initialPersons","filter","item","toLowerCase","includes","event","target","preventDefault","personObject","samePerson","p","length","index","findIndex","obj","window","confirm","setTimeout","catch","err","console","log","newPerson","concat","error","response","matchedPerson","n","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b8e9655f.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = \"/api/persons\"\n\nconst getAll = () => {\n    return axios.get(baseUrl).then(res => res.data)\n}\n\nconst create = (newObj) => {\n    return axios.post(baseUrl, newObj).then(res => res.data)\n}\n\nconst update = (id, Obj) => {\n    return axios.put(`${baseUrl}/${id}`, Obj).then(res => res.data)\n}\n\nconst remove = (deleteObj) => {\n    return axios.delete(`${baseUrl}/${deleteObj.id}`).then(res => res.data)\n}\n\nconst personService = {\n    getAll,\n    create,\n    remove,\n    update\n}\n\nexport default personService","import React from 'react'\n\nconst Person = ({person,handleDelete}) => {\n    return (\n    <div>\n    {person.name} {person.number}\n    <button onClick={() => handleDelete(person.id)}> delete </button>\n    </div>\n    )\n}\n\n\nexport default  Person","import React from \"react\"\nimport Person from \"./Person\"\n// import personService from \"../services/persons\"\n\nconst Persons = (props) => {\n\n    return(\n      <div>\n      {props.persons.map((personItem, id)=> <Person key={id} person={personItem} handleDelete= {props.handleDelete} />)} \n      </div>\n    )\n  }\n\n\nexport default Persons","import React from \"react\"\nimport Person from \"./Person\"\n// const Filter = (props) => {\n//     if (props.input.length === 0) {\n//         return (\n//             <>filter shown with <input type=\"text\" value={props.input} onChange={props.handlePersonShow}/> </>\n//         )\n//     }\n//     else {\n//         return (\n//             <>\n//                 <>filter shown with <input type=\"text\" value={props.input} onChange={props.handlePersonShow}/> </>\n//                 <>{props.personsToshow.map(personItem => <Person key={personItem.id} person={personItem} />)} </> \n//             </>\n//         )\n//     }\n// }\nconst Filter = (props) => {\n    return (\n//     props.input.length === 0 ? \n//     <>filter shown with <input type=\"text\" value={props.input} onChange={props.handlePersonShow}/> </> \n// :\n    <>\n        <>filter shown with <input type=\"text\" value={props.input} onChange={props.handlePersonShow}/> </>\n        <>{props.personsToshow.map(personItem => <Person key={personItem.id} person={personItem} />)} </> \n    </> \n    )\n}\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.addPerson}>\n          <div>name: <input value={props.newName} onChange={props.handleNameChange}/></div>\n          <div>number: <input value={props.newNumber} onChange={props.handleNumberChange}/></div>\n        <div><button type=\"submit\">add</button></div>\n      </form>\n  )\n}\n\nexport default PersonForm","import React from \"react\";\n\nconst Notification = ({message, errorOccured}) => {\n\n    const errorStyle = {\n        color: 'red',\n        background: 'lightgrey',\n        fontSize: 20,\n        borderStyle: 'solid',\n        borderRadius: 5,\n        padding: 10,\n        marginBottom: 10}\n\n    const normalStyle = {\n        color: 'green',\n        fontStyle: 'italic',\n        background: 'lightgrey',\n        fontSize: 20,\n        borderStyle: 'solid',\n        borderRadius: 5,\n        padding: 10,\n        marginBottom: 10}\n    \n    if (message === null) {\n        return null\n    }\n    if(errorOccured === false) {\n        return (\n            <div style={normalStyle}>\n            {message}\n            <br />\n        </div>\n        )\n    }\n    return (\n        <div style={errorStyle}>\n            {message}\n            <br />\n            <br />\n        </div>\n    )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\n// import axios from 'axios'\nimport personService from './services/persons'\nimport Persons from \"./components/Persons\"\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm';\nimport Notification from './components/Notification';\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ input, setInput ] = useState(\"\")\n  const [showNone, setShowNone] = useState(true)\n  const [ newNumber, setNewNumber ] = useState('')\n  const [notification, setNotification] = useState(null)\n  const [errorOccur, setErrorOccur] = useState(false)\n  \n  // useEffect(() => {\n  //   axios\n  //     .get('http://localhost:3001/persons')\n  //     .then(response => {\n  //       setPersons(response.data)\n  //     })\n  // }, [])\n  useEffect(() => {\n    personService\n    .getAll()\n    .then(initialPersons => {\n      setPersons(initialPersons)\n    })\n  }, [])\n\n  \n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {'name': newName, 'number': newNumber} \n    const samePerson = persons.filter(p => p.name === newName)\n    \n      if(samePerson.length !== 0) {\n        let index = persons.findIndex(obj => obj.name === newName)\n        let id = persons[index].id\n        if (window.confirm( `${personObject.name} is already added to phonebook, replace the old number with a new one?`)) {\n          personService\n          .update(id, personObject)\n          .then(personObject => {\n            setPersons(persons.map(person => person.id !== id ? person : personObject))\n            setNotification(`the ${personObject.name}'s information is updated`)\n            setTimeout(() => {setNotification(null)}, 3000)\n          })\n          .catch(err => {\n            console.log(err)\n            setErrorOccur(true)\n            setNotification(`Updation failed, due to one of the reasons: 1)information of ${personObject.name} has already been removed from the server; 2) the new number length is : ${newNumber.length}, which is not long enough`)})\n          setTimeout(() => {setNotification(null)}, 8000)\n          setTimeout(() => setErrorOccur(false), 8000)\n        }\n        else {\n          setNotification(`the updation for ${personObject.name}'s number has been canceled`)\n          setTimeout(() => {setNotification(null)}, 3000)\n        }\n      }\n\n      else if(samePerson.length === 0) {\n        personService\n        .create(personObject)\n        .then(newPerson => {\n          setPersons(persons.concat(newPerson))\n        })\n        .then(setNotification(`Add a new name: ${newName}`))\n        .then(setTimeout(() => {setNotification(null)}, 3000))\n        .catch(error => {\n          console.log(error.response)\n          // if (error.response.data.name === 'ValidationError')\n          setErrorOccur(true)\n          setNotification(`An error occurred: ${error}`)\n          setTimeout(() => {setNotification(null)}, 5000)\n          setTimeout(() => setErrorOccur(false), 5000)\n        })\n      }\n    \n    setNewName(\"\")\n    setNewNumber(\"\")\n    \n  }\n\n  const handleNameChange = (event) => {\n    // console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    // console.log(event.target.value)\n    setNewNumber(event.target.value)\n    // setNumber(number.concat(numberObject))\n  }\n  \n  const handlePersonShow = (event) => {\n    setInput(event.target.value)\n      setShowNone(false)\n  }\n    \n\n\n  const personsToshow = showNone ? persons.filter(item=>item.name === input) : persons.filter(item => item.name.toLowerCase().includes(input.toLowerCase()) === true )\n\n  \n    const deletePerson = (id) => {\n      const matchedPerson = persons.filter(p => p.id === id)[0]\n      // console.log(matchedPerson)\n      window.confirm(`Delete ${matchedPerson.name} ?`) ? \n      personService\n      .remove(matchedPerson)\n      .then(setPersons(persons.filter(n => n.id !== id)))\n      .then(\n        setNotification(`${matchedPerson.name} has just been deleted`))\n        .then(setTimeout(() => setNotification(null), 3000))      \n      \n        // setPersons(persons.filter(p => p.name !== matchedPerson[0].name))\n        : \n        setNotification(`${matchedPerson.name} will not be deleted yet`)\n        setTimeout(() => setNotification(null), 3000)\n\n\n      // alert(`Delete ${matchedPerson[0].name} ?`)\n    }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} errorOccured={errorOccur}/>\n      <Filter input={input} handlePersonShow={handlePersonShow} personsToshow={personsToshow} />\n     \n      <h2>add a new</h2>\n      <PersonForm addPerson={addPerson} newName={newName} newNumber={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} />\n      \n      <h2>Numbers</h2>\n      <Persons persons={persons} handleDelete={deletePerson} />\n \n    </div>\n    )\n}\n\nexport default App\n\n","import ReactDOM from 'react-dom'\nimport App from './App.js'\n\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n\n\n\n"],"sourceRoot":""}